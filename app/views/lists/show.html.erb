<%url = @list.photo.attached? ? @list.photo.key : ''%>
<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url('<%=cl_image_path url, crop: :fill%>')">
    <h1><%=@list.name%></h1>
</div>

<div class="container">
  <div class="d-flex justify-content-end py-3 gap-2">
<%=link_to "edit your list", edit_list_path(@list), class: "link btn btn-success text-white", data: {
              bs_toggle: "modal",
              bs_target: "#staticBackdrop"
            } %>
  <%=link_to "add a bookmark", new_bookmark_path(@list), class: "link btn btn-success text-white", data: {
              bs_toggle: "modal",
              bs_target: "#staticBackdrop2"
            } %>
  </div>

<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Edit your list</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <%=simple_form_for(@list) do |f| %>
        <%=f.input :name%>
        <%=f.input :photo, as: :file%>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <%=f.submit%>
        <%end %>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="staticBackdrop2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Add a bookmark</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <%=simple_form_for [@list, @bookmark] do |f|%>
        <%=f.text_area :comment, class: 'bookmark-text-area' %>
        <%=f.association :movie, class: 'bookmark-dropdown'%>
        </div>
        <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <%=f.submit%>
        <%end %>
      </div>
    </div>
  </div>
</div>




<%@bookmarks.each do |bookmark|%>
      <%@movie_id = bookmark.movie_id%>
      <%@movie = Movie.find(@movie_id)%>
      <div class="d-flex gap-3">
<div class="card-trip">
  <img src=<%=@movie.poster_url%>/>
    <div class="d-flex flex-column justify-content-between">
  <div class="card-trip-infos">
    <div>
      <h2><%=@movie.title%> * <%=@movie.rating%> <i class="fa-solid fa-star text-warning"></i></h2>
      <p><%=@movie.overview%></p>
    </div>
  </div>
    <div class="delete d-flex justify-content-between align-items-end p-2">
    <h2><i class="fa-solid fa-quote-left"></i><%=bookmark.comment%></h2>
    <h2 class="card-trip-pricing"><%=link_to "delete", bookmark_path(bookmark), data:{turbo_method: :delete, turbo_confirm: "are you sure?"}, class: "text-danger"%></h2>
    </div>
    </div>
</div>
<%end%>
</div>
</div>

<div>
        <%=simple_form_for [@list, @review] do |f| %>
        <%=f.input :comment%>
        <%=f.input :rating%>
        <%=f.submit%>
        <%end%>
</div>



</div>
